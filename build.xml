<?xml version="1.0"?>

<project name="agavi" basedir="." default="main">

	<!-- set up some stuff -->
  <property environment="env"/>
  <property file="build.properties"/>
  <property name="package"  value="${phing.project.name}" override="true" />
  <property name="builddir" value="build" override="true" />
  <property name="srcdir"   value="${project.basedir}" override="true" />

  <!-- fileset for -dist files -->
  <fileset dir="." id="distfiles">
		<include name="**/*-dist"/>
  </fileset>

  <!-- main target -->
	<target name="main" description="main target">
		<echo msg="available targets: " /> 
		<echo msg="  test     - run unit tests" />
	</target>

	<!-- test target -->
	<target name="test" description="run unit tests">
		<phpunit2>
			<formatter type="xml" todir="reports"/>
			<batchtest>
				<fileset dir="tests">
					<include name="**/*Test*.php"/>
					<exclude name="**/sandbox/**"/>
				</fileset>
			</batchtest>
		</phpunit2>
		<phpunit2report infile="reports/testsuites.xml" format="frames" todir="reports/tests" styledir="etc"/>
		<echo msg="PHPUnit2 test reports have been built in reports/tests."/>
	</target>

</project>
