<?xml version="1.0"?>

<project name="agavi" basedir="." default="main">

	<!-- set up some stuff -->
  <property environment="env"/>
  <property file="build.properties"/>
  <property name="package"  value="${phing.project.name}" override="true" />
  <property name="builddir" value="build" override="true" />
  <property name="srcdir"   value="${project.basedir}" override="true" />
	<taskdef classname="etc.phing.AgaviPackageTask" name="agavipackage"/>
	<taskdef classname="etc.phing.AgaviTestTask" name="agavitest"/>

  <!-- fileset for -dist files -->
  <fileset dir="." id="distfiles">
		<include name="**/*-dist"/>
  </fileset>

  <!-- main target -->
	<target name="main" description="main target">
		<echo msg="available targets: " /> 
		<echo msg="  docs    : regenerate phpdocs" />
		<echo msg="  test    : run unit test suite" />
		<echo msg="  package : generate PEAR package" />
	</target>

	<target name="docs" description="docs target">
		<phpdoc title="Agavi Documentation" destdir="apidocs" sourcepath="src" output="HTML:frames:earthli"/>
	</target>

	<target name="package" description="build pear package">
		<agavipackage dir="build"/>
	</target>

	<target name="test" description="run test suite">
		<!-- <agavitest outfile="tests.html" reporter="html"/> -->
		<agavitest exit="true"/>
	</target>

</project>
